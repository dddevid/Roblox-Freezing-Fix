<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Redirecting to the appropriate language page based on your location.">
    <meta name="author" content="Your Name">
    <title>Redirecting...</title>
    <script>
        // Funzione per ottenere la lingua appropriata in base alla posizione
        function redirectToLanguagePage(ipData) {
            const country = ipData.country_code;

            // Mappa dei paesi alle lingue
            const languageMap = {
                'IT': 'index_it.html',  // Italia
                'AL': 'index_al.html',  // Albania
                'DE': 'index_de.html',  // Germania
                'ES': 'index_es.html',  // Spagna
                'SA': 'index_ar.html',  // Arabia Saudita (Arabo)
                'CN': 'index_zh.html',  // Cina
                'RU': 'index_ru.html',  // Russia
                'FR': 'index_fr.html',  // Francia
                'PL': 'index_pl.html'   // Polonia
            };

            // Rileva la lingua in base al codice del paese
            const languagePage = languageMap[country] || 'index_en.html'; // Imposta a inglese se il paese non è trovato

            // Reindirizza alla pagina nella lingua appropriata
            window.location.href = languagePage;
        }

        // Funzione per chiamare l'API di geolocalizzazione IP
        function fetchIPData() {
            const apiURL = 'http://api.ipapi.com/api/check?access_key=free';

            fetch(apiURL)
                .then(response => response.json())
                .then(data => redirectToLanguagePage(data))
                .catch(error => {
                    console.error('Errore durante il recupero dei dati IP:', error);
                    // In caso di errore, reindirizza alla pagina predefinita in inglese
                    window.location.href = 'index_en.html';
                });
        }

        // Esegui la funzione quando la pagina è caricata
        window.onload = fetchIPData;
    </script>
</head>
<body>
    <p>Redirecting you to the appropriate language page based on your location...</p>
</body>
</html>
